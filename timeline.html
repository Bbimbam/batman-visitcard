<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Хронология | GOTHAM KNIGHT</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .timeline-page {
            padding: 20px;
        }
        
        .page-header {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.9));
            border-bottom: 1px solid #333;
            margin-bottom: 40px;
        }
        
        .page-header h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255,255,255,0.1);
        }
        
        .timeline-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .timeline {
            position: relative;
            padding: 40px 0;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, #8b0000, transparent);
            transform: translateX(-50%);
        }
        
        .timeline-item {
            display: flex;
            align-items: center;
            margin-bottom: 60px;
            position: relative;
        }
        
        .timeline-item:nth-child(odd) {
            flex-direction: row-reverse;
        }
        
        .timeline-year {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(20,20,20,0.9);
            padding: 10px 20px;
            border-radius: 20px;
            border: 2px solid #8b0000;
            font-family: 'Orbitron', sans-serif;
            font-weight: bold;
            color: white;
            z-index: 2;
        }
        
        .timeline-content {
            flex: 1;
            padding: 30px;
            background: rgba(20,20,20,0.9);
            border-radius: 8px;
            border: 1px solid #333;
            position: relative;
            margin: 0 60px;
        }
        
        .timeline-item:nth-child(odd) .timeline-content {
            margin-left: 60px;
            margin-right: 0;
        }
        
        .timeline-item:nth-child(even) .timeline-content {
            margin-right: 60px;
            margin-left: 0;
        }
        
        .timeline-content::before {
            content: '';
            position: absolute;
            top: 50%;
            width: 20px;
            height: 20px;
            background: #8b0000;
            border-radius: 50%;
            transform: translateY(-50%);
        }
        
        .timeline-item:nth-child(odd) .timeline-content::before {
            left: -40px;
        }
        
        .timeline-item:nth-child(even) .timeline-content::before {
            right: -40px;
        }
        
        .event-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            color: white;
            margin-bottom: 10px;
        }
        
        .event-type {
            display: inline-block;
            padding: 4px 12px;
            background: #8b0000;
            color: white;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-bottom: 15px;
        }
        
        .event-type.hero { background: #006400; }
        .event-type.villain { background: #8b0000; }
        .event-type.batman { background: #1a1a1a; border: 1px solid #8b0000; }
        
        .event-description {
            color: #ccc;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .event-characters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .character-tag {
            padding: 4px 10px;
            background: rgba(30,30,30,0.9);
            border: 1px solid #444;
            border-radius: 4px;
            font-size: 0.8rem;
            color: #ccc;
        }
        
        .timeline-controls {
            background: rgba(20,20,20,0.9);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #333;
            margin-top: 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .year-slider {
            flex: 1;
            min-width: 300px;
        }
        
        .year-display {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            color: white;
        }
        
        .timeline-legend {
            display: flex;
            gap: 30px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #ccc;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        
        .hero-color { background: #006400; }
        .villain-color { background: #8b0000; }
        .batman-color { background: #1a1a1a; border: 1px solid #8b0000; }
        
        @media (max-width: 768px) {
            .timeline::before {
                left: 30px;
            }
            
            .timeline-item {
                flex-direction: row !important;
                margin-left: 60px;
            }
            
            .timeline-year {
                left: 30px;
                transform: translateX(-50%);
            }
            
            .timeline-content {
                margin: 0 !important;
            }
            
            .timeline-content::before {
                left: -40px !important;
                right: auto !important;
            }
        }
    </style>
</head>
<body>
    <!-- Фон -->
    <div class="gothic-bg"></div>
    <div class="bg-overlay"></div>
    
    <!-- Навигация -->
    <nav class="wiki-nav">
        <div class="nav-container">
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            
            <a href="index.html" class="nav-logo">
                <i class="fas fa-bat"></i>
                <span>GOTHAM KNIGHT</span>
            </a>
            
            <div class="nav-menu" id="navMenu">
                <a href="index.html"><i class="fas fa-home"></i> Главная</a>
                <a href="characters.html"><i class="fas fa-user-secret"></i> Персонажи</a>
                <a href="cases.html"><i class="fas fa-folder-open"></i> Архив дел</a>
                <a href="timeline.html" class="active"><i class="fas fa-timeline"></i> Хронология</a>
                <a href="locations.html"><i class="fas fa-map-marked-alt"></i> Локации</a>
            </div>
        </div>
    </nav>

    <!-- Основной контент -->
    <main class="timeline-page">
        <!-- Заголовок -->
        <section class="page-header">
            <h1><i class="fas fa-timeline"></i> ХРОНОЛОГИЯ СОБЫТИЙ</h1>
            <p class="page-subtitle">
                История Готэма от основания до сегодняшнего дня
            </p>
        </section>

        <!-- Временная шкала -->
        <section class="timeline-container">
            <div class="timeline" id="timeline">
                <!-- События загружаются через JavaScript -->
            </div>
        </section>

        <!-- Контролы -->
        <section class="timeline-controls">
            <div class="year-slider">
                <input type="range" id="yearSlider" min="1939" max="2023" value="2023" class="slider">
            </div>
            <div class="year-display" id="currentYear">2023</div>
            <button class="generate-btn" id="playTimeline">
                <i class="fas fa-play"></i> Воспроизвести
            </button>
        </section>

        <!-- Легенда -->
        <section class="timeline-legend">
            <div class="legend-item">
                <div class="legend-color hero-color"></div>
                <span>Событие с участием героев</span>
            </div>
            <div class="legend-item">
                <div class="legend-color villain-color"></div>
                <span>Преступление / Появление злодея</span>
            </div>
            <div class="legend-item">
                <div class="legend-color batman-color"></div>
                <span>Появление / действие Бэтмена</span>
            </div>
        </section>
    </main>

    <!-- Футер -->
    <footer class="wiki-footer">
        <div class="footer-bottom">
            <p>
                <i class="fas fa-copyright"></i> 2023 GOTHAM KNIGHT DATABASE • DC COMICS
            </p>
        </div>
    </footer>

    <!-- Данные и скрипты -->
    <script>
        const timelineData = [
            {
                year: 1939,
                title: "Первое появление Бэтмена",
                type: "batman",
                description: "В комиксе Detective Comics #27 впервые появляется Тёмный Рыцарь.",
                characters: ["Бэтмен"]
            },
            {
                year: 1940,
                title: "Появление Джокера и Робина",
                type: "villain",
                description: "Дебют Джокера в Batman #1 и первого Робина (Дика Грейсона).",
                characters: ["Джокер", "Робин"]
            },
            {
                year: 1942,
                title: "Появление Двуликого",
                type: "villain",
                description: "Первое появление Харви Дента / Двуликого в Detective Comics #66.",
                characters: ["Двуликий"]
            },
            {
                year: 1966,
                title: "Дебют Барбары Гордон",
                type: "hero",
                description: "Барбара Гордон становится Бэтгёрл в Detective Comics #359.",
                characters: ["Бэтгёрл"]
            },
            {
                year: 1986,
                title: "The Dark Knight Returns",
                type: "batman",
                description: "Выход культовой графической новеллы Фрэнка Миллера.",
                characters: ["Бэтмен"]
            },
            {
                year: 1988,
                title: "Убийство Джейсона Тодда",
                type: "villain",
                description: "Джокер убивает второго Робина, Джейсона Тодда.",
                characters: ["Джокер", "Джейсон Тодд"]
            },
            {
                year: 1993,
                title: "Knightfall",
                type: "villain",
                description: "Бейн ломает спину Бэтмену. Жан-Поль Вэлли становится новым Бэтменом.",
                characters: ["Бейн", "Бэтмен"]
            },
            {
                year: 1999,
                title: "No Man's Land",
                type: "batman",
                description: "Землетрясение разрушает Готэм. Правительство отказывается от города.",
                characters: ["Бэтмен", "Семья Бэтмена"]
            },
            {
                year: 2005,
                title: "Batman Begins",
                type: "batman",
                description: "Выход фильма Кристофера Нолана, перезапуск кинематографической вселенной.",
                characters: ["Бэтмен", "Ра'с аль Гул"]
            },
            {
                year: 2008,
                title: "The Dark Knight",
                type: "villain",
                description: "Фильм с Хитом Леджером в роли Джокера становится культовым.",
                characters: ["Джокер", "Двуликий", "Бэтмен"]
            },
            {
                year: 2011,
                title: "The Court of Owls",
                type: "villain",
                description: "Открытие существования секретного общества, контролирующего Готэм.",
                characters: ["Суд Сов", "Бэтмен"]
            },
            {
                year: 2014,
                title: "Endgame",
                type: "villain",
                description: "Джокер возвращается с планом уничтожить Готэм и убить Бэтмена.",
                characters: ["Джокер", "Бэтмен"]
            },
            {
                year: 2021,
                title: "Fear State",
                type: "villain",
                description: "Пугало захватывает контроль над Готэмом с помощью социальных сетей.",
                characters: ["Пугало", "Бэтмен"]
            },
            {
                year: 2023,
                title: "Амёбный Город",
                type: "villain",
                description: "Бейн возвращается и захватывает контроль над районом Амёбного Города.",
                characters: ["Бейн", "Бэтмен"]
            }
        ];

        // Инициализация страницы
        document.addEventListener('DOMContentLoaded', function() {
            const timelineContainer = document.getElementById('timeline');
            const yearSlider = document.getElementById('yearSlider');
            const currentYearDisplay = document.getElementById('currentYear');
            const playButton = document.getElementById('playTimeline');
            
            let currentDisplayYear = 2023;
            let isPlaying = false;
            let playInterval;
            
            // Функция рендеринга временной шкалы
            function renderTimeline(year) {
                timelineContainer.innerHTML = '';
                
                const filteredEvents = timelineData.filter(event => event.year <= year);
                
                filteredEvents.forEach((event, index) => {
                    const item = document.createElement('div');
                    item.className = 'timeline-item';
                    
                    item.innerHTML = `
                        <div class="timeline-year">${event.year}</div>
                        <div class="timeline-content">
                            <h3 class="event-title">${event.title}</h3>
                            <span class="event-type ${event.type}">
                                ${event.type === 'hero' ? 'ГЕРОЙ' : 
                                  event.type === 'villain' ? 'ЗЛОДЕЙ' : 'БЭТМЕН'}
                            </span>
                            <p class="event-description">${event.description}</p>
                            <div class="event-characters">
                                ${event.characters.map(character => 
                                    `<span class="character-tag">${character}</span>`
                                ).join('')}
                            </div>
                        </div>
                    `;
                    
                    timelineContainer.appendChild(item);
                });
            }
            
            // Обработчик слайдера
            yearSlider.addEventListener('input', function() {
                currentDisplayYear = parseInt(this.value);
                currentYearDisplay.textContent = currentDisplayYear;
                renderTimeline(currentDisplayYear);
            });
            
            // Кнопка воспроизведения
            playButton.addEventListener('click', function() {
                if (!isPlaying) {
                    // Начинаем воспроизведение
                    isPlaying = true;
                    playButton.innerHTML = '<i class="fas fa-pause"></i> Пауза';
                    
                    let year = 1939;
                    yearSlider.value = year;
                    currentYearDisplay.textContent = year;
                    
                    playInterval = setInterval(() => {
                        if (year >= 2023) {
                            clearInterval(playInterval);
                            isPlaying = false;
                            playButton.innerHTML = '<i class="fas fa-play"></i> Воспроизвести';
                            return;
                        }
                        
                        year++;
                        yearSlider.value = year;
                        currentYearDisplay.textContent = year;
                        renderTimeline(year);
                        
                        // Прокрутка к последнему событию
                        const lastItem = document.querySelector('.timeline-item:last-child');
                        if (lastItem) {
                            lastItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                    }, 500); // 0.5 секунды на год
                } else {
                    // Останавливаем воспроизведение
                    clearInterval(playInterval);
                    isPlaying = false;
                    playButton.innerHTML = '<i class="fas fa-play"></i> Воспроизвести';
                }
            });
            
            // Первоначальный рендеринг
            renderTimeline(currentDisplayYear);
            
            // Добавляем анимацию появления
            setTimeout(() => {
                document.querySelectorAll('.timeline-item').forEach((item, index) => {
                    setTimeout(() => {
                        item.style.opacity = '1';
                        item.style.transform = 'translateY(0)';
                    }, index * 100);
                });
            }, 300);
            
            // Добавляем CSS для анимации
            const style = document.createElement('style');
            style.textContent = `
                .timeline-item {
                    opacity: 0;
                    transform: translateY(30px);
                    transition: opacity 0.5s ease, transform 0.5s ease;
                }
                
                .slider {
                    width: 100%;
                    height: 6px;
                    background: #333;
                    outline: none;
                    border-radius: 3px;
                }
                
                .slider::-webkit-slider-thumb {
                    width: 20px;
                    height: 20px;
                    background: #8b0000;
                    border-radius: 50%;
                    cursor: pointer;
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html>